<!DOCTYPE html>
<html>
<head>
    <title>Chat em Tempo Real</title>
    <meta charset="UTF-8">
    <!-- Socket.IO Ã© servido automaticamente pelo servidor -->
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>
<h1>ðŸ’¬ Chat em Tempo Real</h1>
<div id="mensagens" style="border:1px solid #ccc; height:300px;
         overflow-y:scroll; padding:10px; margin-bottom:10px;"></div>

<input id="inputMsg" type="text" placeholder="Escreva a mensagem..."
       style="width:70%;">
<button onclick="enviarMensagem()">Enviar</button>

<script>
    // Conectar ao servidor Socket.IO
    const socket = io();

    console.log('A tentar conectar ao servidor...');

    socket.on('connect', () => {
        console.log('Conectado ao servidor!');
    });

    // Receber mensagens do servidor
    socket.on('mensagem', (data) => {
        const div = document.getElementById('mensagens');
        div.innerHTML += `<p><b>${data.user}:</b> ${data.text}</p>`;
        div.scrollTop = div.scrollHeight; // Scroll automÃ¡tico
    });

    // Enviar mensagem ao servidor
    function enviarMensagem() {
        const input = document.getElementById('inputMsg');
        if (input.value.trim() !== '') {
            socket.emit('mensagem', {
                user: 'Utilizador',
                text: input.value
            });
            input.value = '';
        }
    }

    // Enviar com tecla Enter
    document.getElementById('inputMsg').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            enviarMensagem();
        }
    });
</script>
</body>
</html>
